<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css"
              integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"
                integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh"
                crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"
                integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ"
                crossorigin="anonymous"></script>

        <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"></script>

        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
        <link rel="stylesheet" href="css/main.css">
        <script src="js/plugins.js"></script>
        <script src="js/main.js"></script>
    <script>
        var numPDFClicks = 0;
        var numIMGClicks = 0;
        var numMovieClicks = 0;
        var numRenames = 0;
        var numCtrC = 0;
        var numCtrV = 0;

        function clicked(type) {
            if (type == 'pdf') numPDFClicks++;
            else if (type == 'img') numIMGClicks++;
        }

        function resetClicks() {
            numPDFClicks = 0;
            numIMGClicks = 0;
            numMovieClicks = 0;
            numCtrC = 0;
            numCtrV = 0;
        }

        function triggerAutoRename() {
            // open the dialogue for the current folder if the threshold is met
            if (numRenames > 2) {
                if (numPDFClicks > 2) {
                    console.log('trigger rename pdfs in the folder') // e.g. makeRenameDialogue('dialogueDiv, getFileNames('current_folder', 'vlc'))
                } else if (numMovieCLicks > 2) {
                    console.log('trigger rename movies in the folder')
                }
            }
        }
        /**
         *
         * @param folder - div name of a folder containing files
         * @type type of files we want to include in the return. can be null if you want everything in Folder
         * @returns {Array} of filenames in the folder
         */
        function getFileNames(folder, type) {
            var values = [];
            $("#" + folder).children().each(function() {
                if (type == undefined || $(this).attr("class").indexOf(type) >= 0) {
                    values.push($(this).find('p').text());
                }
            })
            return values;
        }

        $(document).ready(function() {
            $(".draggable").each(function() {
                $(this).draggable({
                    drag: function( event, ui ) {
                        var snapTolerance = $(this).draggable('option', 'snapTolerance');
                        var topRemainder = ui.position.top % 20;
                        var leftRemainder = ui.position.left % 20;

                        if (topRemainder <= snapTolerance) {
                            ui.position.top = ui.position.top - topRemainder;
                        }

                        if (leftRemainder <= snapTolerance) {
                            ui.position.left = ui.position.left - leftRemainder;
                        }
                    }
                });

            })
        });

    </script>
    </head>
    <body class="body">
        <div id="dialogueDiv"></div>
        <div id="desktop_folder">
            <div class="icon draggable pdf">
                <image class='pdf-icon' ondblclick="clicked('pdf');makeRenameDialogue('dialogueDiv', getFileNames('desktop_folder', 'pdf'));"></image>
                <p id="file_f10f903">file_f10f903</p>
            </div>
            <div class="icon draggable pdf">
                <image class='pdf-icon' ondblclick="clicked('pdf');makeRenameDialogue('dialogueDiv', getFileNames('desktop_folder', 'pdf'));"></image>
                <p id="file_ab42nl">file_ab42nl</p>
            </div>
            <div class="icon draggable img">
                <image class='img-icon' src='../img/birb.jpg' ondblclick="clicked('img');makeRenameDialogue('dialogueDiv', getFileNames('desktop_folder', 'img'));"></image>
                <p id="IMG_94_9260">IMG_94_9260</p>
            </div>
        </div>
    </body>
</html>
